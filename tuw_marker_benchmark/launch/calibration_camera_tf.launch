<launch>

    <arg name="device" default="1" />
    <arg name="show" default="false" />

    <node pkg="tuw_uvc" type="logitech_node" name="camera" output="screen">
        <param name="video_device" value="/dev/video$(arg device)"/>
        <param name="show_camera_image" value="$(arg show)"/>
        <param name="convert_image" value="0"/>
        <param name="camera_info_url" value="file://$(find tuw_marker_benchmark)/cfg/camera_c920_mockup.yml" />
        <param name="frame_id" value="camera"/>
        <param name="width" value="960"/>
        <param name="height" value="720"/>
    </node>

    <node pkg="tf" type="static_transform_publisher" name="base_link_broadcaster" args="0 0 0 0 0 0 1 odom base_link 100" />


    <!--
        x=1.252m
        y=0

        checkerboard offset 
        x=0.0465
        y=0.146

        result=1.252+0.0465

        1.187 total laser measurement
    -->
    <node pkg="tf" type="static_transform_publisher" name="checkerboard_broadcaster" args="1.187 -0.146 0 0 0 0 base_link checkerboard_static 100" />
    <node pkg="tf" type="static_transform_publisher" name="camera_mount_bar_broadcaster" args="0 0 0.615 0 0 0 1 base_link camera_mount_bar 100" />

    <node name="tuw_checkerboard_node" pkg="tuw_checkerboard" type="tuw_checkerboard_node" output="screen">
        <!--
        <param name="checkerboard_size_col" value="9" />
        <param name="checkerboard_size_row" value="6" />
        <param name="checkerboard_square_size" value="0.0365" type="double" />
        <param name="checkerboard_min_square_size" value="4" />

        <param name="adaptive_thresh" value="True" />
        <param name="subpixelfit" value="True" />
        <param name="filter_quads" value="True" />
        <param name="fast_check" value="True" />
        <param name="frame_id" value="checkerboard_static" />
        -->
        <remap from="image" to="/camera/image_raw"/>
        <remap from="camera" to="/camera"/>
    </node>

    <node pkg="tf" type="static_transform_publisher" name="checkerboard_inv_broadcaster" args="0 0 0 0 0 0 1 checkerboard_static checkerboard_inv 100" />
    <node pkg="tuw_marker_benchmark" type="tf_inv_node.py" name="tf_inv_node" output="screen" />

    <node pkg="tuw_marker_benchmark" type="tf_lookup_node.py" name="tf_lookup_node" output="screen" />

    <!-- RViz -->
    <node name="rviz" pkg="rviz" type="rviz" args="-d  $(find tuw_marker_benchmark)/rviz/calibration_tf_config.rviz" />

</launch>

